<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36" version="24.7.17">
  <diagram name="페이지-1" id="OGJJPKaFFh_ImrWDYOEu">
    <mxGraphModel dx="806" dy="771" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="hsGD_RhnxvM9qgn9JG00-1" value="struct" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="49" y="60" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hsGD_RhnxvM9qgn9JG00-2" value="&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;font color=&quot;#005eff&quot;&gt;struct &lt;/font&gt;&lt;font color=&quot;#83c7ad&quot;&gt;packet&lt;/font&gt;&lt;/font&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#005eff&quot;&gt;public int&lt;/font&gt; packet_id;&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#005eff&quot;&gt;public int&lt;/font&gt; msg_size;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#005eff&quot;&gt;public int&lt;/font&gt; room_id;&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#005eff&quot;&gt;public string&lt;/font&gt; message;&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#005eff&quot;&gt;public byte&lt;/font&gt;[] &lt;font color=&quot;#edc237&quot;&gt;packet_data&lt;/font&gt;()&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;{&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#005eff&quot;&gt;byte&lt;/font&gt;[] &lt;font color=&quot;#5ec4ff&quot;&gt;packet_id_bytes &lt;/font&gt;= &lt;font color=&quot;#22ad9f&quot;&gt;BitConverter&lt;/font&gt;.&lt;font color=&quot;#edc237&quot;&gt;GetBytes&lt;/font&gt;(packet_id);&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#005eff&quot;&gt;byte&lt;/font&gt;[] &lt;font color=&quot;#5ec4ff&quot;&gt;msg_size_bytes &lt;/font&gt;= &lt;font color=&quot;#22ad9f&quot;&gt;BitConverter&lt;/font&gt;.&lt;font color=&quot;#edc237&quot;&gt;GetBytes&lt;/font&gt;(msg_size);&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: initial; white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;background-color: initial; white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#005eff&quot;&gt;byte&lt;/font&gt;[] &lt;font color=&quot;#5ec4ff&quot;&gt;room_id_bytes &lt;/font&gt;= &lt;font color=&quot;#22ad9f&quot;&gt;BitConverter&lt;/font&gt;.&lt;font color=&quot;#edc237&quot;&gt;GetBytes&lt;/font&gt;(room_id);&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#005eff&quot;&gt;byte&lt;/font&gt;[] &lt;font color=&quot;#5ec4ff&quot;&gt;message_bytes &lt;/font&gt;= &lt;font color=&quot;#22ad9f&quot;&gt;Encoding&lt;/font&gt;.UTF8.&lt;font color=&quot;#edc237&quot;&gt;GetBytes&lt;/font&gt;(message);&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br style=&quot;&quot;&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;byte[] packet_bytes = new byte[&lt;font color=&quot;#5ec4ff&quot;&gt;packet_id_bytes&lt;/font&gt;.Length + &lt;font color=&quot;#5ec4ff&quot;&gt;msg_size_bytes&lt;/font&gt;.Length + &lt;font color=&quot;#5ec4ff&quot;&gt;room_id_bytes&lt;/font&gt;.Length + &lt;font color=&quot;#5ec4ff&quot;&gt;message_bytes&lt;/font&gt;.Length];&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#22ad9f&quot;&gt;Buffer&lt;/font&gt;.&lt;font color=&quot;#edc237&quot;&gt;BlockCopy&lt;/font&gt;(&lt;font color=&quot;#5ec4ff&quot;&gt;packet_id_bytes&lt;/font&gt;, 0, &lt;font color=&quot;#5ec4ff&quot;&gt;packet_bytes&lt;/font&gt;, 0, &lt;font color=&quot;#5ec4ff&quot;&gt;packet_id_bytes&lt;/font&gt;.Length);&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;color: rgb(34, 173, 159);&quot;&gt;Buffer&lt;/span&gt;.&lt;span style=&quot;color: rgb(237, 194, 55);&quot;&gt;BlockCopy&lt;/span&gt;(&lt;font color=&quot;#5ec4ff&quot;&gt;msg_size_bytes&lt;/font&gt;, 0, &lt;font color=&quot;#5ec4ff&quot;&gt;packet_bytes&lt;/font&gt;, &lt;font color=&quot;#5ec4ff&quot;&gt;packet_id_bytes&lt;/font&gt;.Length, &lt;font color=&quot;#5ec4ff&quot;&gt;msg_size_bytes&lt;/font&gt;.Length);&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;color: rgb(34, 173, 159);&quot;&gt;Buffer&lt;/span&gt;.&lt;span style=&quot;color: rgb(237, 194, 55);&quot;&gt;BlockCopy&lt;/span&gt;(&lt;font color=&quot;#5ec4ff&quot;&gt;room_id_bytes&lt;/font&gt;, 0, &lt;font color=&quot;#5ec4ff&quot;&gt;packet_bytes&lt;/font&gt;, &lt;font color=&quot;#5ec4ff&quot;&gt;packet_id_bytes&lt;/font&gt;.Length + &lt;font color=&quot;#5ec4ff&quot;&gt;msg_size_bytes&lt;/font&gt;.Length, &lt;font color=&quot;#5ec4ff&quot;&gt;room_id_bytes&lt;/font&gt;.Length);&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;color: rgb(34, 173, 159);&quot;&gt;Buffer&lt;/span&gt;.&lt;span style=&quot;color: rgb(237, 194, 55);&quot;&gt;BlockCopy&lt;/span&gt;(&lt;font color=&quot;#5ec4ff&quot;&gt;message_bytes&lt;/font&gt;, 0, &lt;font color=&quot;#5ec4ff&quot;&gt;packet_bytes&lt;/font&gt;, &lt;font color=&quot;#5ec4ff&quot;&gt;packet_id_bytes&lt;/font&gt;.Length + &lt;font color=&quot;#5ec4ff&quot;&gt;msg_size_bytes&lt;/font&gt;.Length + &lt;font color=&quot;#5ec4ff&quot;&gt;room_id_bytes&lt;/font&gt;.Length, &lt;font color=&quot;#5ec4ff&quot;&gt;message_bytes&lt;/font&gt;.Length);&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#ff03bc&quot;&gt;return &lt;/font&gt;&lt;font color=&quot;#5ec4ff&quot;&gt;packet_bytes&lt;/font&gt;;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;}&lt;/font&gt;&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;};&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;horizontal=1;fontSize=14;spacing=2;fillColor=none;strokeColor=default;shadow=0;glass=0;perimeterSpacing=0;" vertex="1" parent="1">
          <mxGeometry x="49" y="120" width="951" height="390" as="geometry" />
        </mxCell>
        <mxCell id="hsGD_RhnxvM9qgn9JG00-3" value="send" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="49" y="590" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hsGD_RhnxvM9qgn9JG00-4" value="보내려는 헤더와 데이터를 구조체를 통하여 값을 저장 후 직렬화하여 send&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;b&gt;ex) 로그인 시도 send&lt;/b&gt;&lt;/i&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;font color=&quot;#005eff&quot;&gt;byte&lt;/font&gt;[] &lt;font color=&quot;#5ec4ff&quot;&gt;send_pkt&lt;/font&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;font color=&quot;#83c7ad&quot;&gt;packet &lt;/font&gt;&lt;font color=&quot;#5ec4ff&quot;&gt;pkt &lt;/font&gt;= &lt;font color=&quot;#005eff&quot;&gt;new &lt;/font&gt;&lt;font color=&quot;#83c7ad&quot;&gt;packet&lt;/font&gt;();&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;font color=&quot;#005eff&quot;&gt;string &lt;/font&gt;&lt;font color=&quot;#5ec4ff&quot;&gt;message &lt;/font&gt;= $&quot;{&lt;font color=&quot;#5ec4ff&quot;&gt;id&lt;/font&gt;},{&lt;font color=&quot;#5ec4ff&quot;&gt;hashedPassword&lt;/font&gt;}&quot;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;font color=&quot;#5ec4ff&quot;&gt;pkt&lt;/font&gt;.packet_id = &lt;font color=&quot;#22ad9f&quot;&gt;identification_code&lt;/font&gt;.LOGIN;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;font color=&quot;#5ec4ff&quot;&gt;pkt&lt;/font&gt;.msg_size = &lt;font color=&quot;#5ec4ff&quot;&gt;message&lt;/font&gt;.Length;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;font color=&quot;#5ec4ff&quot;&gt;pkt&lt;/font&gt;.room_id = 0;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;font color=&quot;#5ec4ff&quot;&gt;pkt&lt;/font&gt;.message = &lt;font color=&quot;#5ec4ff&quot;&gt;message&lt;/font&gt;;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;font color=&quot;#5ec4ff&quot;&gt;send_pkt &lt;/font&gt;= &lt;font color=&quot;#5ec4ff&quot;&gt;pkt&lt;/font&gt;.&lt;font color=&quot;#edc237&quot;&gt;packet_data&lt;/font&gt;();&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#297338&quot;&gt;// 구조체 함수를 실행하여 패킷의 바이트 생성&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 14px;&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;socket.&lt;font color=&quot;#edc237&quot;&gt;Send&lt;/font&gt;(&lt;font color=&quot;#5ec4ff&quot;&gt;send_pkt&lt;/font&gt;);&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#297338&quot;&gt;// 바이트 전송&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;labelBorderColor=none;labelBackgroundColor=none;strokeColor=default;" vertex="1" parent="1">
          <mxGeometry x="49" y="640" width="571" height="280" as="geometry" />
        </mxCell>
        <mxCell id="hsGD_RhnxvM9qgn9JG00-5" value="receive" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="49" y="990" width="71" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hsGD_RhnxvM9qgn9JG00-6" value="바이트 형태의 데이터를 수신받고 고정된 길이의 헤더와 가변길이의 메시지를 receive 후 역직렬화&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;i&gt;ex) 로그인 시도 응답 receive&lt;/i&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;private void Begin_Recv()&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;byte[] recv_pkt = new byte[1024];&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;// 수신받을 패킷의 버퍼&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;socket.BeginReceive(recv_pkt, 0, recv_pkt.Length, SocketFlags.None, new AsyncCallback(Recv_Packet), recv_pkt);&lt;br&gt;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;private void Recv_Packet(IAsyncResult ar)&lt;/div&gt;&lt;div&gt;{&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;try&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;{&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;byte[] recv_pkt = (byte[])ar.AsyncState;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;socket.EndReceive(ar);&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;packet pkt = new pkt();&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;pkt.packet_id = BitConverter.ToInt32(recv_pkt, 0);&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;// 수신 받은 버퍼의 0부터&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;pkt&lt;span style=&quot;background-color: initial;&quot;&gt;.msg_size = BitConverter.ToInt32(recv_pkt, 4);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;pkt&lt;span style=&quot;background-color: initial;&quot;&gt;.room_id = BitConverter.ToInt32(recv_pkt, 8);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;pkt&lt;span style=&quot;background-color: initial;&quot;&gt;.message = Encoding.UTF8.GetString(recv_pkt, 12, pkt.msg_size);&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;switch (pkt.packet_id)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;horizontal=1;" vertex="1" parent="1">
          <mxGeometry x="49" y="1050" width="961" height="310" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
